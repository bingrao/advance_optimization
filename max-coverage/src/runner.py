from utlis.data import data_gen
from tools.algorithms import random_coverage
from tools.algorithms import greedy_max_coverage
from tools.algorithms import pipage_rounding
import itertools


def main():
	print("Hello World from Python world")
	# input_data = data_gen(20)
	input_data = [{14, 278}, {65, 109, 187, 158, 63}, {3, 228, 201, 170, 240, 158, 220, 286, 95}, {232, 236, 286}, {101, 169, 141, 110, 81, 91, 156, 126}, {280, 242, 56, 114}, {296, 281, 89, 263}, {67, 69, 27, 150, 88, 56, 187, 31}, {195, 13, 157, 158, 31}, {100, 198, 91, 84, 246, 58, 59}, {164, 41, 237, 206, 18, 147, 281, 189}, {160, 97, 223, 300, 236, 148, 188, 189, 63}, {212, 277}, {64, 215, 200}, {5, 135, 10, 204, 238, 213, 248, 189}, {49, 146}, {291}, {1, 218, 237, 247}, {42, 164, 239}, {99, 106, 43, 44, 243, 254, 158}]
	universe = list(set(itertools.chain(*input_data)))
	print("Universe Element Size: " + str(len(universe)) + ", Nums sub-Set: " + str(len(input_data)))

	print("***********************random_coverage********************************")
	input_data = [{14, 278}, {65, 109, 187, 158, 63}, {3, 228, 201, 170, 240, 158, 220, 286, 95}, {232, 236, 286}, {101, 169, 141, 110, 81, 91, 156, 126}, {280, 242, 56, 114}, {296, 281, 89, 263}, {67, 69, 27, 150, 88, 56, 187, 31}, {195, 13, 157, 158, 31}, {100, 198, 91, 84, 246, 58, 59}, {164, 41, 237, 206, 18, 147, 281, 189}, {160, 97, 223, 300, 236, 148, 188, 189, 63}, {212, 277}, {64, 215, 200}, {5, 135, 10, 204, 238, 213, 248, 189}, {49, 146}, {291}, {1, 218, 237, 247}, {42, 164, 239}, {99, 106, 43, 44, 243, 254, 158}]
	cover, covered = random_coverage(10, input_data)
	print("The max covered nums: " + str(len(covered)))
	for sub_set in cover:
		print(sub_set)

	print("*************************greedy_max_coverage******************************")
	input_data = [{14, 278}, {65, 109, 187, 158, 63}, {3, 228, 201, 170, 240, 158, 220, 286, 95}, {232, 236, 286}, {101, 169, 141, 110, 81, 91, 156, 126}, {280, 242, 56, 114}, {296, 281, 89, 263}, {67, 69, 27, 150, 88, 56, 187, 31}, {195, 13, 157, 158, 31}, {100, 198, 91, 84, 246, 58, 59}, {164, 41, 237, 206, 18, 147, 281, 189}, {160, 97, 223, 300, 236, 148, 188, 189, 63}, {212, 277}, {64, 215, 200}, {5, 135, 10, 204, 238, 213, 248, 189}, {49, 146}, {291}, {1, 218, 237, 247}, {42, 164, 239}, {99, 106, 43, 44, 243, 254, 158}]
	cover, covered = greedy_max_coverage(10, input_data)
	print("The max covered nums: " + str(len(covered)))
	for sub_set in cover:
		print(sub_set)

	print("*************************pipage_rounding******************************")
	input_data = [{14, 278}, {65, 109, 187, 158, 63}, {3, 228, 201, 170, 240, 158, 220, 286, 95}, {232, 236, 286}, {101, 169, 141, 110, 81, 91, 156, 126}, {280, 242, 56, 114}, {296, 281, 89, 263}, {67, 69, 27, 150, 88, 56, 187, 31}, {195, 13, 157, 158, 31}, {100, 198, 91, 84, 246, 58, 59}, {164, 41, 237, 206, 18, 147, 281, 189}, {160, 97, 223, 300, 236, 148, 188, 189, 63}, {212, 277}, {64, 215, 200}, {5, 135, 10, 204, 238, 213, 248, 189}, {49, 146}, {291}, {1, 218, 237, 247}, {42, 164, 239}, {99, 106, 43, 44, 243, 254, 158}]
	x = pipage_rounding(10, input_data)
	print(x)
	covered = set()
	cover = []
	for i in range(0, x.shape[0]):
		if x[i] == 1:
			cover.append(input_data[i])
			covered |= input_data[i]

	print("The max covered nums: " + str(len(covered)))
	for sub_set in cover:
		print(sub_set)


if __name__ == "__main__":
	main()
